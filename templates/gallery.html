{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/assets.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/gallery.css') }}"> <script src="https://unpkg.com/@phosphor-icons/web"></script>

<header class="gallery-header">
    <div class="header-overlay"></div>
    <div class="container h-100 d-flex flex-column justify-content-center position-relative">
        
        <h1 class="display-1 fw-bold tracking-tight">The <span class="text-gradient">Collection</span></h1>
        <p class="lead text-white-50" style="max-width: 500px;">
            A curated archive of degital landscapes and visual explorations.
        </p>
    </div>
    <div class="marquee-bg">
        <span>CREATIVITY • DATA • ART • DESIGN • FUTURE • </span>
        <span>CREATIVITY • DATA • ART • DESIGN • FUTURE • </span>
    </div>
</header>

<div class="sticky-filter-container">
    <div class="glass-dock">
        <button class="dock-item active" onclick="filterGallery('all', this)">
            <i class="ph ph-squares-four"></i> All
        </button>
        <button class="dock-item" onclick="filterGallery('saved', this)">
            <i class="ph ph-image"></i> Saved
        </button>
        <button class="dock-item" onclick="filterGallery('drawings', this)">
            <i class="ph ph-paint-brush"></i> Sketches
        </button>
        <button class="dock-item" onclick="filterGallery('data', this)">
            <i class="ph ph-chart-bar"></i> Data
        </button>
        <button class="dock-item" onclick="filterGallery('edited', this)">
            <i class="ph ph-sliders"></i> Edited
        </button>
    </div>
</div>

<div class="container-fluid px-4 pb-5">
    <div class="gallery-grid" id="galleryGrid">
        
        {% for img in saved_assets %}
        <div class="gallery-item category-saved">
            <div class="image-wrapper">
                <img src="{{ url_for('static', filename='outputs/' + img) }}" loading="lazy" onclick="openLightbox(this.src)">
                <div class="item-overlay">
                    <div class="card-actions">
                        <a href="{{ url_for('static', filename='outputs/' + img) }}" download class="icon-btn" title="Download">
                            <i class="ph ph-download-simple"></i>
                        </a>
                        <button class="icon-btn" onclick="openLightbox(this.closest('.image-wrapper').querySelector('img').src)" title="Zoom">
                            <i class="ph ph-arrows-out-simple"></i>
                        </button>
                        <button class="icon-btn delete" onclick="deleteImage('{{ img }}', this)" title="Delete">
                            <i class="ph ph-trash"></i>
                        </button>
                    </div>
                    <div class="overlay-content">
                        <h5>Masterpiece</h5>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

        {% for img in drawings %}
        <div class="gallery-item category-drawings">
            <div class="image-wrapper">
                <img src="{{ url_for('static', filename='outputs/' + img) }}" loading="lazy" onclick="openLightbox(this.src)">
                <div class="item-overlay">
                    <div class="card-actions">
                        <a href="{{ url_for('static', filename='outputs/' + img) }}" download class="icon-btn" title="Download">
                            <i class="ph ph-download-simple"></i>
                        </a>
                        <button class="icon-btn" onclick="openLightbox(this.closest('.image-wrapper').querySelector('img').src)" title="Zoom">
                            <i class="ph ph-arrows-out-simple"></i>
                        </button>
                        <button class="icon-btn delete" onclick="deleteImage('{{ img }}', this)" title="Delete">
                            <i class="ph ph-trash"></i>
                        </button>
                    </div>
                    <div class="overlay-content">
                        <h5>Sketch</h5>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

        {% for img in data_art %}
        <div class="gallery-item category-data">
            <div class="image-wrapper bg-white">
                <img src="{{ url_for('static', filename='outputs/' + img) }}" style="object-fit: contain; padding: 10px;" onclick="openLightbox(this.src)">
                <div class="item-overlay">
                    <div class="card-actions">
                        <a href="{{ url_for('static', filename='outputs/' + img) }}" download class="icon-btn" title="Download">
                            <i class="ph ph-download-simple"></i>
                        </a>
                        <button class="icon-btn" onclick="openLightbox(this.closest('.image-wrapper').querySelector('img').src)" title="Analyze">
                            <i class="ph ph-arrows-out-simple"></i>
                        </button>
                        <button class="icon-btn delete" onclick="deleteImage('{{ img }}', this)" title="Delete">
                            <i class="ph ph-trash"></i>
                        </button>
                    </div>
                    <div class="overlay-content">
                        <h5>Data Viz</h5>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

        {% for img in edited %}
        <div class="gallery-item category-edited">
            <div class="image-wrapper">
                <img src="{{ url_for('static', filename='outputs/' + img) }}" loading="lazy" onclick="openLightbox(this.src)">
                <div class="item-overlay">
                    <div class="card-actions">
                        <a href="{{ url_for('static', filename='outputs/' + img) }}" download class="icon-btn" title="Download">
                            <i class="ph ph-download-simple"></i>
                        </a>
                        <button class="icon-btn" onclick="openLightbox(this.closest('.image-wrapper').querySelector('img').src)" title="Zoom">
                            <i class="ph ph-arrows-out-simple"></i>
                        </button>
                        <button class="icon-btn delete" onclick="deleteImage('{{ img }}', this)" title="Delete">
                            <i class="ph ph-trash"></i>
                        </button>
                    </div>
                    <div class="overlay-content">
                        <h5>Edited Art</h5>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>
    
    <div id="empty-message" class="text-center py-5 d-none">
        <h3 class="text-muted">Nothing to show here yet.</h3>
    </div>
</div>

<div id="lightbox" class="lightbox">
    <button class="close-lightbox" onclick="closeLightbox()"><i class="ph ph-x"></i></button>
    <button class="nav-btn prev" onclick="changeImage(-1)"><i class="ph ph-caret-left"></i></button>
    <img id="lightbox-img" src="" alt="Zoomed Image">
    <button class="nav-btn next" onclick="changeImage(1)"><i class="ph ph-caret-right"></i></button>
</div>

<script src="{{ url_for('static', filename='js/gallery.js') }}"></script> {% endblock %}